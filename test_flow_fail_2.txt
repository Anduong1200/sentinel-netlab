F
======================================================================
FAIL: test_end_to_end_flow (__main__.TestIntegrationFlow.test_end_to_end_flow)
Verify that frames are captured, processed, and buffered.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "d:\hod_lab\tests\test_integration_flow.py", line 132, in test_end_to_end_flow
    self.assertEqual(item['bssid'], "aa:bb:cc:dd:ee:ff") # normalized/lower
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: 'AA:BB:CC:XX:XX:XX' != 'aa:bb:cc:dd:ee:ff'
- AA:BB:CC:XX:XX:XX
+ aa:bb:cc:dd:ee:ff


----------------------------------------------------------------------
Ran 1 test in 8.016s

FAILED (failures=1)
Starting controller...
Stopping controller...
Controller Status: {'sensor_id': 'test-sensor-integration', 'interface': 'test0', 'running': False, 'monitor_mode': False, 'current_channel': 11, 'uptime_seconds': 8.011244, 'frames_captured': 1, 'frames_parsed': 1, 'frames_duplicates': 0, 'buffer': {'buffer_current_size': 0, 'buffer_max_size': 10000, 'buffer_occupancy_pct': 0.0, 'total_appended': 1, 'dropped_count': 0, 'batch_counter': 1, 'journal_count': 0, 'journal_disk_bytes': 0, 'journal_disk_mb': 0.0}, 'transport': <MagicMock name='mock.get_stats()' id='2321752242384'>, 'normalizer': {'sensor_id': 'test-sensor-integration', 'sequence_id': 1, 'uptime_seconds': 8.013167, 'capture_method': 'mock', 'anonymize_ssid': False}}
Uploaded Item: {'bssid': 'AA:BB:CC:XX:XX:XX', 'ssid': 'TestNet', 'channel': 0, 'rssi_dbm': -100, 'frequency_mhz': 0, 'capabilities': {'privacy': True, 'ht': False, 'vht': False, 'he': False, 'pmf': False, 'wps': False, 'ess': True, 'ibss': False, 'ies_present': ['SSID']}, 'vendor_oui': 'AA:BB:CC', 'ie_count': 1, 'beacon_interval': 100, 'timestamp': '2026-01-28T03:42:07.418907+00:00'}
