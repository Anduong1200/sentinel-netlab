============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\ADMIN\AppData\Local\Programs\Python\Python311\python.exe
cachedir: .pytest_cache
rootdir: D:\sentinel-netlab
configfile: pyproject.toml
testpaths: tests
plugins: anyio-4.12.1, dash-3.4.0, cov-7.0.0
collecting ... collected 97 items / 90 deselected / 7 selected

tests/system/test_system_dashboard.py::test_dashboard_smoke_with_basic_auth FAILED [ 14%]
tests/system/test_system_recovery.py::test_controller_persists_data_across_restart PASSED [ 28%]
tests/system/test_system_security.py::test_auth_enforced_on_telemetry PASSED [ 42%]
tests/system/test_system_security.py::test_tls_gating_when_enabled PASSED [ 57%]
tests/system/test_system_security.py::test_hmac_required_allows_signed_requests PASSED [ 71%]
tests/system/test_system_security.py::test_rate_limit_telemetry PASSED   [ 85%]
tests/system/test_system_smoke.py::test_controller_health_and_metrics PASSED [100%]

================================== FAILURES ===================================
____________________ test_dashboard_smoke_with_basic_auth _____________________
tests\system\test_system_dashboard.py:44: in test_dashboard_smoke_with_basic_auth
    _wait_http(f"{base}/dashboard/", timeout_s=30)
tests\system\conftest.py:32: in _wait_http
    raise RuntimeError(f"Service not ready: {url} (last_err={last_err})")
E   RuntimeError: Service not ready: http://127.0.0.1:34606/dashboard/ (last_err=HTTPConnectionPool(host='127.0.0.1', port=34606): Max retries exceeded with url: /dashboard/ (Caused by ConnectTimeoutError(<HTTPConnection(host='127.0.0.1', port=34606) at 0x197f92f2190>, 'Connection to 127.0.0.1 timed out. (connect timeout=1.0)')))
============================== warnings summary ===============================
tests\test_integration_flow.py:16
  D:\sentinel-netlab\tests\test_integration_flow.py:16: PytestCollectionWarning:
  
  cannot collect test class 'TestCaptureDriver' because it has a __init__ constructor (from: tests/test_integration_flow.py)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED tests/system/test_system_dashboard.py::test_dashboard_smoke_with_basic_auth - RuntimeError: Service not ready: http://127.0.0.1:34606/dashboard/ (last_err=HTTPConnectionPool(host='127.0.0.1', port=34606): Max retries exceeded with url: /dashboard/ (Caused by ConnectTimeoutError(<HTTPConnection(host='127.0.0.1', port=34606) at 0x197f92f2190>, 'Connection to 127.0.0.1 timed out. (connect timeout=1.0)')))
=========== 1 failed, 6 passed, 90 deselected, 1 warning in 45.96s ============
