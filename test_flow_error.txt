E
======================================================================
ERROR: test_end_to_end_flow (__main__.TestIntegrationFlow.test_end_to_end_flow)
Verify that frames are captured, processed, and buffered.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "d:\hod_lab\tests\test_integration_flow.py", line 126, in test_end_to_end_flow
    self.assertEqual(uploaded_batch['sensor_id'], "test-sensor-integration")
                     ~~~~~~~~~~~~~~^^^^^^^^^^^^^
KeyError: 'sensor_id'

----------------------------------------------------------------------
Ran 1 test in 8.026s

FAILED (errors=1)
Starting controller...
Stopping controller...
Controller Status: {'sensor_id': 'test-sensor-integration', 'interface': 'test0', 'running': False, 'monitor_mode': False, 'current_channel': 11, 'uptime_seconds': 8.016701, 'frames_captured': 1, 'frames_parsed': 1, 'frames_duplicates': 0, 'buffer': {'buffer_current_size': 0, 'buffer_max_size': 10000, 'buffer_occupancy_pct': 0.0, 'total_appended': 1, 'dropped_count': 0, 'batch_counter': 1, 'journal_count': 0, 'journal_disk_bytes': 0, 'journal_disk_mb': 0.0}, 'transport': <MagicMock name='mock.get_stats()' id='2436312053904'>, 'normalizer': {'sensor_id': 'test-sensor-integration', 'sequence_id': 1, 'uptime_seconds': 8.019411, 'capture_method': 'mock', 'anonymize_ssid': False}}
