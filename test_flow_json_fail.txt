Upload loop error: Object of type Capabilities is not JSON serializable
Upload loop error: Object of type Capabilities is not JSON serializable
Failed to write journal: Object of type Capabilities is not JSON serializable
F
======================================================================
FAIL: test_end_to_end_flow (__main__.TestIntegrationFlow.test_end_to_end_flow)
Verify that frames are captured, processed, and buffered.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "d:\hod_lab\tests\test_integration_flow.py", line 122, in test_end_to_end_flow
    controller.transport.upload.assert_called()
  File "C:\Users\ADMIN\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py", line 908, in assert_called
    raise AssertionError(msg)
AssertionError: Expected 'upload' to have been called.

----------------------------------------------------------------------
Ran 1 test in 7.041s

FAILED (failures=1)
Starting controller...
Stopping controller...
Controller Status: {'sensor_id': 'test-sensor-integration', 'interface': 'test0', 'running': False, 'monitor_mode': False, 'current_channel': 11, 'uptime_seconds': 7.023366, 'frames_captured': 1, 'frames_parsed': 1, 'frames_duplicates': 0, 'buffer': {'buffer_current_size': 0, 'buffer_max_size': 10000, 'buffer_occupancy_pct': 0.0, 'total_appended': 1, 'dropped_count': 0, 'batch_counter': 0, 'journal_count': 0, 'journal_disk_bytes': 0, 'journal_disk_mb': 0.0}, 'transport': <MagicMock name='mock.get_stats()' id='1532190765968'>, 'normalizer': {'sensor_id': 'test-sensor-integration', 'sequence_id': 1, 'uptime_seconds': 7.027459, 'capture_method': 'mock', 'anonymize_ssid': False}}
